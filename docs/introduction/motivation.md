---
title: 初衷
---

秉承简单与兼容性至上的原则，最好的状态管理方式当然是直接使用 React 内置能力而不是外部全部状态。然而 React 确实存在着一些问题：

- 组件状态只能与其祖先组件进行共享，这可能会带来组件树中大量的重绘开销。
- Context 只能保存一个特定值而不是与其 Consumer 共享一组不确定的值。
- 以上两点导致组件树顶部组件（状态生产者）与组件树底部组件（状态消费者）之间的代码拆分变得非常困难。

我们希望在尽可能保持 React 代码风格和语义化的前提下解决以上问题。

Recoil 在组件树中定义了一个正交且内聚的单向图谱。状态变更通过以下方法从图谱的底部（`atoms`）通过纯函数（`selectors`）进入组件：

- 我们提供了一些无依赖的方法，这些方法像 React 局部状态一样暴露相同的 get/set 接口（简单理解为 `reducers` 之类的概念亦可）。
- 我们能够与一些 React 新功能（比如并发模式）兼容。
- 状态定义是可伸缩和分布式的，代码拆分成为可能。
- 不用修改组件即可派生数据状态。
- 派生数据状态支持同步和异步。
- 我们把跳转看作一级概念，甚至可以对链接中的状态流转进行编码。
- 所以可以简单地使用向后兼容的方式来持久化整个应用的状态，应用变更时持久化状态也可以因此得以保留。
